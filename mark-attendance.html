<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mark Attendance</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body data-page="mark-attendance">
  <div class="banner container">
    <div class="navbar">
        <img src="logo.jpg" class="logo" alt="School Logo">
        <ul class="nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="attendance.html">Attendance</a></li>
          <li><a href="students.html">Students</a></li>
          <li><a href="classes.html">Classes</a></li>
          <li><a href="assignments.html">Assignments</a></li>
          <li><a href="exams.html">Exams</a></li>
          <li><a href="reports.html">Reports</a></li>
          <li><a href="settings.html">Settings</a></li>
        </ul>
      </div><br>
    <h2 id="attendanceHeading">Mark Attendance</h2>
    <div class="table-card mt-3">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-0">Attendance List</h5>
        <div class="attendance-actions">
          <button class="btn btn-sm btn-success" onclick="markAllPresent()">Mark All Present</button>
          <button class="btn btn-sm btn-danger" onclick="markAllAbsent()">Mark All Absent</button>
          <button class="btn btn-sm btn-primary" onclick="saveAttendance()">Save Attendance</button>
        </div>
      </div>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>#</th>
            <th>Student</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="attendanceTableBody">
          <!-- Students will be loaded dynamically -->
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // Load students from localStorage and populate table
    function loadStudents() {
      const students = JSON.parse(localStorage.getItem('students')) || [];
      const tbody = document.getElementById('attendanceTableBody');
      tbody.innerHTML = '';
      students.forEach((student, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${idx + 1}</td>
          <td>${student}</td>
          <td>
            <select class="form-select form-select-sm attendance-status">
              <option value="Present">Present</option>
              <option value="Absent">Absent</option>
            </select>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    // Dummy implementations for attendance actions
    function markAllPresent() {
      document.querySelectorAll('.attendance-status').forEach(sel => sel.value = 'Present');
    }
    function markAllAbsent() {
      document.querySelectorAll('.attendance-status').forEach(sel => sel.value = 'Absent');
    }
    function saveAttendance() {
      const students = JSON.parse(localStorage.getItem('students')) || [];
      const statuses = Array.from(document.querySelectorAll('.attendance-status')).map(sel => sel.value);
      const attendance = students.map((student, idx) => ({
        name: student,
        status: statuses[idx]
      }));
      localStorage.setItem('attendance', JSON.stringify(attendance));
      alert('Attendance saved!');
    }

    document.addEventListener('DOMContentLoaded', loadStudents);
  </script>
  <script src="scripts.js"></script>
</body>
</html>